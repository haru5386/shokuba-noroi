"use strict";(()=>{var e={};e.id=865,e.ids=[865],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1721:e=>{e.exports=import("@upstash/redis")},9648:e=>{e.exports=import("axios")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},8658:(e,t,n)=>{n.a(e,async(e,o)=>{try{n.r(t),n.d(t,{config:()=>l,default:()=>u,routeModule:()=>p});var a=n(1802),r=n(7153),s=n(6249),i=n(8781),c=e([i]);i=(c.then?(await c)():c)[0];let u=(0,s.l)(i,"default"),l=(0,s.l)(i,"config"),p=new a.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/curse",pathname:"/api/curse",bundlePath:"",filename:""},userland:i});o()}catch(e){o(e)}})},2663:(e,t,n)=>{n.d(t,{Z:()=>o});let o={low:["願 {職位} 早上出門就踩到水溝蓋。","願 {職位} 午餐的炸雞裡沒有肉。","願 {職位} 倒熱咖啡時剛好打了個噴嚏。","願 {職位} 的耳機永遠纏在一起。","願 {職位} 點的珍奶永遠忘記加珍珠。","願 {職位} 每次微波便當都忘了拿筷子。","願 {職位} 排隊點餐時前面的人都猶豫三分鐘。","願 {職位} 用的筆一寫就斷水。","願 {職位} 每次打開冰箱都只有醬油。","願 {職位} 的會議剛好壓在午休時間。","願 {職位} 訂的外送永遠慢十分鐘。","願 {職位} 每次按電梯都剛好滿人。","願 {職位} 的椅子每隔一小時自動往下掉一點。","願 {職位} 中午買飯時遇到全公司都下樓。","願 {職位} 的電腦鍵盤少一顆鍵。","願 {職位} 每次開會都遇到有人一直 echo。","願 {職位} 的網路每 10 分鐘卡一次。","願 {職位} 訂的辦公室飲料都變無糖。","願 {職位} 穿白衣吃滷肉飯一定會噴到。","願 {職位} 的滑鼠每隔 5 秒雙擊一次。"],mid:["願 {職位} 報告送出後才發現忘記附件。","願 {職位} 永遠找不到會議連結。","願 {職位} 的滑鼠永遠右鍵當左鍵。","願 {職位} 的 Google Meet 永遠卡在 Connecting。","願 {職位} 上傳的簡報封面打錯公司名字。","願 {職位} 每次進會議都被點名報告。","願 {職位} 簡報投影時忘了關私人訊息。","願 {職位} 的 Teams 每次訊息都 @ 錯人。","願 {職位} 的文件永遠在“未命名文件 1”夾裡。","願 {職位} 在共用文件裡永遠輸入格數錯一行。","願 {職位} 剛說“沒問題”就出現 99+ bug。","願 {職位} 永遠打不出 VPN 密碼。","願 {職位} 的 demo 網站只會在老闆看時壞掉。","願 {職位} 的 PR 被退 7 次還看不懂為什麼。","願 {職位} 排定的 code freeze 永遠被 PM 改掉。","願 {職位} 上傳影片忘了剪掉罵人的片段。","願 {職位} 推 production 前都沒睡飽。","願 {職位} 寫的單元測試永遠跑不過 CI。","願 {職位} 永遠猜不到 Jira ticket 的真實內容。","願 {職位} 鍵盤空白鍵每次都卡灰塵。"],high:["願 {職位} 午餐吃一半發現牙套卡菜渣。","願 {職位} 出門趕車結果剛好關門。","願 {職位} 在超商排隊結帳時後面大媽貼背呼吸。","願 {職位} 襯衫穿反整天沒人說。","願 {職位} 剛洗完頭就下大雨。","願 {職位} 用力擠番茄醬結果全噴在褲子上。","願 {職位} 戴口罩時眼鏡永遠起霧。","願 {職位} 睡過頭還遇上電梯停機保養。","願 {職位} 拿著垃圾下樓結果垃圾車剛開走。","願 {職位} 的外送被送到隔壁棟還找不到。","願 {職位} 出門一整天才發現襪子不一樣。","願 {職位} 在圖書館大放屁沒辦法假裝不是自己。","願 {職位} 上台發言忘詞還被直播。","願 {職位} 坐公車打瞌睡睡過站還錯過打卡。","願 {職位} 滑手機不小心點讚前任三年前的照片。","願 {職位} 體檢抽血被連戳三次還找不到血管。","願 {職位} 在 KTV 唱到一半歌詞跑掉。","願 {職位} 在公共廁所發現沒帶衛生紙。","願 {職位} 在愛情公寓被鄰居放搖滾整晚。","願 {職位} 大掃除吸塵器吸到自己耳機。"]}},8781:(e,t,n)=>{n.a(e,async(e,o)=>{try{n.r(t),n.d(t,{default:()=>c});var a=n(9648),r=n(1721),s=n(2663),i=e([a,r]);[a,r]=i.then?(await i)():i;let u=async e=>{let t=encodeURIComponent(e);return await l.get(t)},l=new r.Redis({url:process.env.UPSTASH_REDIS_REST_URL,token:process.env.UPSTASH_REDIS_REST_TOKEN}),p=async(e,t,n=86400)=>{let o=encodeURIComponent(e);await l.set(o,t,{ex:n})};async function c(e,t){let{role:n,rage:o}=e.body,r=process.env.OPENAI_API_KEY;try{let e=`${n}:${o}`,s=await u(e);if(s)return t.status(200).json({curse:s,source:"cache"});let i=`請用幽默但帶點怒氣的語氣，對一位${n}，根據怒氣值${o}，給一句詛咒語（不要太長，繁體中文）`,c=(await a.default.post("https://api.openai.com/v1/chat/completions",{model:"gpt-4.1-nano",messages:[{role:"user",content:i}],max_tokens:50,temperature:.9},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data.choices[0].message.content.trim();await p(e,c),t.status(200).json({curse:c,source:"openai"})}catch(r){let e;console.log("error",r);let a=(e=s.Z.low,o>10&&o<=20&&(e=s.Z.mid),o>20&&(e=s.Z.high),e[Math.floor(Math.random()*e.length)].replace("{職位}",n));t.status(200).json({curse:a,source:"local"})}}o()}catch(e){o(e)}})},7153:(e,t)=>{var n;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))},1802:(e,t,n)=>{e.exports=n(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var n=t(t.s=8658);module.exports=n})();